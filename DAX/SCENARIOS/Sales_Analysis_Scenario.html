<div style="max-width: 1200px; margin: 0 auto; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;"><h1 style="color: #1a472a; border-bottom: 3px solid #1a472a; padding-bottom: 10px;">DAX Learning Guide: Sales Analysis Scenario</h1><div style="background-color: #f0f7f0; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h2>ðŸ“Š Scenario Overview</h2> <p>You're analyzing sales data for a retail company. We'll create sample tables and build DAX measures to answer business questions.</p> </div><h2 style="color: #2c5530; margin-top: 30px;">ðŸ“‹ Sample Tables</h2><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;"><div style="background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);"> <h3 style="color: #1a472a;">Sales Table</h3> <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;"> Sales = DATATABLE( "OrderID", INTEGER, "Date", DATETIME, "ProductID", INTEGER, "CustomerID", INTEGER, "Quantity", INTEGER, "UnitPrice", CURRENCY, { {1, DATE(2024,1,15), 101, 201, 2, 50}, {2, DATE(2024,1,16), 102, 202, 1, 120}, {3, DATE(2024,1,17), 101, 203, 3, 50}, {4, DATE(2024,2,10), 103, 201, 1, 200}, {5, DATE(2024,2,15), 102, 204, 2, 120}, {6, DATE(2024,3,20), 101, 202, 1, 50}, {7, DATE(2024,3,25), 103, 203, 2, 200} } ) </pre> <table style="width: 100%; margin-top: 10px; border-collapse: collapse;"> <thead> <tr style="background-color: #1a472a; color: white;"> <th style="padding: 8px; text-align: left;">OrderID</th> <th style="padding: 8px; text-align: left;">Date</th> <th style="padding: 8px; text-align: left;">ProductID</th> <th style="padding: 8px; text-align: left;">CustomerID</th> <th style="padding: 8px; text-align: left;">Quantity</th> <th style="padding: 8px; text-align: left;">UnitPrice</th> </tr> </thead> <tbody> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">1</td><td style="padding: 8px;">1/15/2024</td><td style="padding: 8px;">101</td><td style="padding: 8px;">201</td><td style="padding: 8px;">2</td><td style="padding: 8px;">$50</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">2</td><td style="padding: 8px;">1/16/2024</td><td style="padding: 8px;">102</td><td style="padding: 8px;">202</td><td style="padding: 8px;">1</td><td style="padding: 8px;">$120</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">3</td><td style="padding: 8px;">1/17/2024</td><td style="padding: 8px;">101</td><td style="padding: 8px;">203</td><td style="padding: 8px;">3</td><td style="padding: 8px;">$50</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">4</td><td style="padding: 8px;">2/10/2024</td><td style="padding: 8px;">103</td><td style="padding: 8px;">201</td><td style="padding: 8px;">1</td><td style="padding: 8px;">$200</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">5</td><td style="padding: 8px;">2/15/2024</td><td style="padding: 8px;">102</td><td style="padding: 8px;">204</td><td style="padding: 8px;">2</td><td style="padding: 8px;">$120</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">6</td><td style="padding: 8px;">3/20/2024</td><td style="padding: 8px;">101</td><td style="padding: 8px;">202</td><td style="padding: 8px;">1</td><td style="padding: 8px;">$50</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">7</td><td style="padding: 8px;">3/25/2024</td><td style="padding: 8px;">103</td><td style="padding: 8px;">203</td><td style="padding: 8px;">2</td><td style="padding: 8px;">$200</td></tr> </tbody> </table> </div><div style="background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);"> <h3 style="color: #1a472a;">Products Table</h3> <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;"> Products = DATATABLE( "ProductID", INTEGER, "ProductName", STRING, "Category", STRING, "Cost", CURRENCY, { {101, "Widget A", "Widgets", 30}, {102, "Gadget B", "Gadgets", 80}, {103, "Tool C", "Tools", 150} } ) </pre> <table style="width: 100%; margin-top: 10px; border-collapse: collapse;"> <thead> <tr style="background-color: #1a472a; color: white;"> <th style="padding: 8px; text-align: left;">ProductID</th> <th style="padding: 8px; text-align: left;">ProductName</th> <th style="padding: 8px; text-align: left;">Category</th> <th style="padding: 8px; text-align: left;">Cost</th> </tr> </thead> <tbody> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">101</td><td style="padding: 8px;">Widget A</td><td style="padding: 8px;">Widgets</td><td style="padding: 8px;">$30</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">102</td><td style="padding: 8px;">Gadget B</td><td style="padding: 8px;">Gadgets</td><td style="padding: 8px;">$80</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">103</td><td style="padding: 8px;">Tool C</td><td style="padding: 8px;">Tools</td><td style="padding: 8px;">$150</td></tr> </tbody> </table> </div></div><div style="background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;"> <h3 style="color: #1a472a;">Customers Table</h3> <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;"> Customers = DATATABLE( "CustomerID", INTEGER, "CustomerName", STRING, "City", STRING, { {201, "Alpha Corp", "New York"}, {202, "Beta Inc", "Los Angeles"}, {203, "Gamma Ltd", "Chicago"}, {204, "Delta Co", "Houston"} } ) </pre> <table style="width: 100%; margin-top: 10px; border-collapse: collapse;"> <thead> <tr style="background-color: #1a472a; color: white;"> <th style="padding: 8px; text-align: left;">CustomerID</th> <th style="padding: 8px; text-align: left;">CustomerName</th> <th style="padding: 8px; text-align: left;">City</th> </tr> </thead> <tbody> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">201</td><td style="padding: 8px;">Alpha Corp</td><td style="padding: 8px;">New York</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">202</td><td style="padding: 8px;">Beta Inc</td><td style="padding: 8px;">Los Angeles</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">203</td><td style="padding: 8px;">Gamma Ltd</td><td style="padding: 8px;">Chicago</td></tr> <tr style="border-bottom: 1px solid #ddd;"><td style="padding: 8px;">204</td><td style="padding: 8px;">Delta Co</td><td style="padding: 8px;">Houston</td></tr> </tbody> </table> </div><h2 style="color: #2c5530; margin-top: 40px;">ðŸ’¡ DAX Measures & Explanations</h2><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">1. Basic Aggregation - Total Sales</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> Total Sales = SUMX( Sales, Sales[Quantity] * Sales[UnitPrice] ) </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li><strong>SUMX</strong> is an iterator function that goes through each row in the Sales table</li> <li>For each row, it calculates: Quantity Ã— UnitPrice</li> <li>Then sums all the results</li> <li>Result: $1,490 total sales</li> </ul> </div> </div><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">2. Row Context - Profit Margin</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> Profit Margin = VAR Revenue = Sales[Quantity] * Sales[UnitPrice] VAR Cost = Sales[Quantity] * RELATED(Products[Cost]) RETURN (Revenue - Cost) / Revenue </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li><strong>VAR</strong> creates variables to store intermediate calculations</li> <li><strong>RELATED</strong> follows the relationship to get the cost from Products table</li> <li>Calculates profit margin as: (Revenue - Cost) / Revenue</li> <li>This is a calculated column that works in row context</li> </ul> </div> </div><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">3. Filter Context - Sales by Category</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> Widget Sales = CALCULATE( [Total Sales], Products[Category] = "Widgets" ) </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li><strong>CALCULATE</strong> modifies the filter context</li> <li>It evaluates [Total Sales] but only for rows where Category = "Widgets"</li> <li>The filter flows through the relationship from Products to Sales</li> <li>Result: $300 (only Widget A sales)</li> </ul> </div> </div><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">4. Time Intelligence - Month-to-Date Sales</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> MTD Sales = CALCULATE( [Total Sales], DATESMTD(Sales[Date]) ) </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li><strong>DATESMTD</strong> returns all dates from the beginning of the month to the current date</li> <li>It automatically detects the month based on the current filter context</li> <li>Accumulates sales from the 1st of the month to the selected date</li> </ul> </div> </div><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">5. Advanced Pattern - Top N Customers</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> Top 2 Customers Sales = VAR TopCustomers = TOPN( 2, SUMMARIZE( Sales, Sales[CustomerID], "CustomerSales", [Total Sales] ), [CustomerSales], DESC ) RETURN CALCULATE( [Total Sales], KEEPFILTERS(TopCustomers) ) </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li><strong>SUMMARIZE</strong> groups sales by CustomerID and calculates total per customer</li> <li><strong>TOPN</strong> selects the top 2 customers by sales amount</li> <li><strong>KEEPFILTERS</strong> applies this filter while preserving existing filters</li> <li>Returns total sales for only the top 2 customers</li> </ul> </div> </div><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">6. Context Transition - Average Customer Purchase</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> Avg Customer Purchase = AVERAGEX( VALUES(Sales[CustomerID]), [Total Sales] ) </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li><strong>VALUES</strong> returns unique CustomerIDs</li> <li><strong>AVERAGEX</strong> iterates through each customer</li> <li>For each customer, it calculates [Total Sales] (context transition occurs here)</li> <li>Then averages all customer totals</li> <li>Result: $372.50 average per customer</li> </ul> </div> </div><div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 5px solid #1a472a;"> <h3 style="color: #1a472a;">7. Complex Logic - Running Total</h3> <pre style="background-color: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 5px; overflow-x: auto;"> Running Total = VAR CurrentDate = MAX(Sales[Date]) RETURN CALCULATE( [Total Sales], Sales[Date] <= CurrentDate, ALL(Sales[Date]) ) </pre> <div style="background-color: #e8f5e9; padding: 15px; border-radius: 5px; margin-top: 15px;"> <h4 style="color: #1a472a; margin-top: 0;">Logic Explanation:</h4> <ul style="margin: 10px 0;"> <li>Captures the current date in context with <strong>MAX</strong></li> <li><strong>ALL</strong> removes any date filters to see all dates</li> <li>Filters to keep only dates up to and including the current date</li> <li>Creates a cumulative sum over time</li> </ul> </div> </div><div style="background-color: #fff3cd; padding: 20px; border-radius: 8px; margin: 30px 0; border-left: 5px solid #ffc107;"> <h3 style="color: #856404; margin-top: 0;">ðŸŽ¯ Practice Exercises</h3> <ol style="margin: 10px 0;"> <li><strong>Calculate Year-over-Year Growth:</strong> Compare this year's sales to last year's</li> <li><strong>Find Best-Selling Product:</strong> Identify which product generates the most revenue</li> <li><strong>Customer Retention:</strong> Count customers who bought in multiple months</li> <li><strong>Dynamic Pricing Analysis:</strong> Calculate average price by category over time</li> </ol> </div><div style="background-color: #d4edda; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h3 style="color: #155724; margin-top: 0;">ðŸ’ª Key DAX Concepts to Master</h3> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;"> <div> <h4 style="color: #1a472a;">Evaluation Contexts</h4> <ul style="margin: 5px 0;"> <li>Row Context</li> <li>Filter Context</li> <li>Context Transition</li> </ul> </div> <div> <h4 style="color: #1a472a;">Essential Functions</h4> <ul style="margin: 5px 0;"> <li>CALCULATE / CALCULATETABLE</li> <li>FILTER / ALL / VALUES</li> <li>SUMX / AVERAGEX iterators</li> </ul> </div> </div> </div></div>